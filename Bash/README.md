# 📝 Bash 기본 문법 정리

## 1. 출력

```bash
echo "HELLO"
```

* `echo` 는 문자열 출력.
* 큰따옴표/작은따옴표 둘 다 가능.

---

## 2. 변수

```bash
name="H"
echo $name    # 값 참조할 땐 $ 붙임
echo name     # 그대로 'name' 글자 출력됨
```

* Bash에서는 타입 선언 없음. 그냥 값 저장.
* `$변수명` → 값 참조.

---

## 3. 입력 받기

```bash
read var
```

* 한 줄 입력 받아 변수 `var`에 저장.

예:

```bash
read name
echo "Welcome $name"
```

---

## 4. 산술 연산

```bash
read x
read y
echo $((x + y))   # 합
echo $((x - y))   # 차
echo $((x * y))   # 곱
echo $((x / y))   # 몫
echo $((x % y))   # 나머지
```

* `$(( ))` 안에서 산술 연산 가능.

---

## 5. 조건문

```bash
if [ 조건 ]; then
  실행문
elif [ 다른조건 ]; then
  실행문
else
  실행문
fi
```

* 블록 닫을 때 `fi` 사용.
* `[ ]` 안에 조건, 반드시 공백 필요.

정수 비교:

* `-eq` 같다
* `-ne` 다르다
* `-gt` 크다
* `-lt` 작다
* `-ge` 크거나 같다
* `-le` 작거나 같다

문자열 비교:

* `=` 같다
* `!=` 다르다

---

## 6. 논리 연산자

* `&&` : AND
* `||` : OR

---

## 7. 반복문

```bash
for i in {1..99..2}
do
  echo $i
done
```

```bash
for ((i=1; i<=99; i+=2))
do
  echo $i
done
```

---

## 8. cut 명령어 (텍스트 처리)

### 문자 단위 추출

* `cut -c3` : 각 줄의 3번째 문자
* `cut -c2,7` : 각 줄의 2번째와 7번째 문자
* `cut -c2-7` : 2번째부터 7번째 문자까지
* `cut -c1-4` 또는 `cut -c-4` : 처음 4문자
* `cut -c13-` : 13번째 문자부터 끝까지

### 필드 단위 추출

* `cut -f1-3` : 탭 구분 데이터에서 1~3번째 필드
* `cut -f2-` : 탭 구분 데이터에서 2번째 필드부터 끝까지
* `cut -d' ' -f4` : 공백 구분 데이터에서 4번째 단어
* `cut -d' ' -f1-3` : 공백 구분 데이터에서 처음 3단어

---

## 9. head / tail

* `head -n 20 file` : 처음 20줄 출력
* `head -c 20 file` : 처음 20글자 출력
* `tail -n 20 file` : 마지막 20줄 출력
* `tail -c 20 file` : 마지막 20글자 출력
* 줄 범위 출력 (예: 12~22줄):

  * `sed -n '12,22p' file`
  * `awk 'NR>=12 && NR<=22' file`
  * `head -n 22 file | tail -n 11`

---

## 10. tr 명령어 (문자 변환/삭제)

* 기본 문법: `tr [옵션] SET1 [SET2]`
* 치환: `echo hello | tr 'a-z' 'A-Z'` → HELLO
* 삭제: `echo hello123 | tr -d '0-9'` → hello
* 압축: `echo "aa    bb" | tr -s ' '` → "aa bb"
* 보완 집합: `echo abc123 | tr -d -c '0-9'` → 123

예시:

* 괄호를 대괄호로 변환: `tr '()' '[]'`
* 소문자 삭제: `tr -d 'a-z'`
* 연속된 공백을 하나로: `tr -s ' '`

---

## 11. sort 명령어 (정렬)

### 기본 동작

```bash
sort file.txt
```

* 기본은 **사전순(lexicographical, 오름차순)** 정렬.

### 주요 옵션

* `-r` : 내림차순(Reverse).
* `-n` : 숫자 기준 정렬.
* `-kN` : N번째 컬럼 기준 정렬.
* `-tX` : 구분자 지정 (예: `-t,`, `-t'|'`).
* `-u` : 중복 제거 후 정렬.

### 주의점

* **TSV(Tab)** → `-t $'\t'` 로 지정해야 함. (`"\t"`는 리터럴 문자라서 안 됨)
* **Pipe(|)** → 그냥 `-t'|'` 로 가능.

### 예시

```bash
echo -e "3\n1\n2" | sort -n
# 1
# 2
# 3

sort -t $'\t' -k2,2nr file.tsv
# 2번째 컬럼을 숫자 내림차순 정렬 (TSV 파일)
```

---

## 12. uniq 명령어 (중복 제거/카운트)

### 기본 동작

* 연속된 중복 행만 제거한다.
* 비연속 중복은 제거하지 않음 → `sort`와 함께 사용해야 전체 중복 제거 가능.

예시:

```bash
$ cat input.txt
00
00
01
01
00
02
02

$ uniq input.txt
00
01
00
02
```

### 주요 옵션

* `-c` : 각 행의 반복 횟수를 출력

  ```bash
  uniq -c input.txt
  ```
* `-d` : 중복된 행만 출력
* `-u` : 중복되지 않은 행만 출력
* `-i` : 대소문자 구분 없이 비교

### 출력 형식 조정

* `uniq -c`는 앞에 여분의 공백이 붙음 → `sed 's/^ *//'` 로 제거 가능
* 예시:

  ```bash
  uniq -c file | sed 's/^ *//'
  ```

### 전체 중복 제거

* `sort file | uniq` 또는 `sort -u file`

---

## 13. paste 명령어 (행 단위 병합)

* 기본: 같은 행을 탭으로 이어 붙임.
  ```bash
  paste file1 file2
  ```
* `-d X` : 구분자 지정.
  ```bash
  paste -d ';' file1 file2
  ```
* `-s` : 세로 대신 가로로 병합.
  ```bash
  paste -s -d ';' file
  ```
* 표준입력 사용 예: `paste -s -d ';'`
* n줄씩 묶기: `paste -d ';' - - -` (3줄 단위)

---

## 14. awk 명령어 (패턴 기반 텍스트 처리)

* 기본 문법: `awk 'pattern { action }' file`
* `$0` : 전체 줄
* `$1`, `$2` … : 필드
* `NR` : 현재 줄 번호
* `NF` : 현재 줄의 필드 수
* `FS` : 입력 구분자, `OFS` : 출력 구분자
* 조건 예시:
  ```bash
  awk '$3 > 50 {print $1, $2}' file
  ```
* 블록: `BEGIN {}` / `END {}`
* 평균 구하기 예시:
  ```bash
  awk '{ avg = ($2+$3+$4)/3; print $1, ":", avg }'
  ```
* 조건 분기:
  ```bash
  awk '{ if ($2<50 || $3<50 || $4<50) print $1, ": Fail"; else print $1, ": Pass" }'
  ```
* 여러 줄 묶기:
  ```bash
  awk 'NR % 2 == 1 { printf "%s;", $0 } NR % 2 == 0 { print $0 }'
  ```

---

## 15. grep 명령어 (패턴 검색)

* 기본 문법: `grep [옵션] '패턴' 파일`
* 표준입력도 가능: `... | grep 'text'`
* 자주 쓰는 옵션:
  * `-i` : 대소문자 무시
  * `-v` : 매칭되지 않은 줄 출력
  * `-n` : 줄 번호 출력
  * `-c` : 매칭된 줄 개수 출력
  * `-r` : 하위 디렉토리 재귀 검색
  * `-w` : 단어 단위 매칭
  * `-E` : 확장 정규식 사용
  * `-o` : 매칭 부분만 출력
* 예시:
  ```bash
  grep -iw 'the'        # the 단어 포함 줄, 대소문자 무시
  grep -ivw 'that'      # that 단어 포함 줄 제거, 대소문자 무시
  grep -rn "TODO" src/  # 소스코드 전체에서 TODO 찾기
  ```

---

## 16. sed 명령어 (스트림 편집기)

### 기본 개념

- `sed`는 텍스트를 한 줄씩 읽어 **치환, 삭제, 추가, 출력 제어**를 수행.
- 기본은 표준 출력으로 결과를 보여줌. `-i` 옵션을 쓰면 원본 파일 수정.

### 주요 동작

- `s/찾을패턴/바꿀내용/` : 치환 (기본은 한 줄에 첫 매치만)
  - `g` 플래그: 한 줄 안의 모든 매치 치환
  - `I` 플래그: 대소문자 무시 (GNU sed)
- `d` : 줄 삭제
- `p` : 줄 출력
- `a` : 줄 뒤에 삽입
- `i` : 줄 앞에 삽입
- `c` : 줄 전체를 다른 내용으로 교체
- `y/문자집합1/문자집합2/` : 문자 단위 변환

### 단어 단위 치환 (경계 지정)

```bash
echo "the there them" | sed -E 's/\<the\>/this/g'
# 결과: this there them
```

- `\<` : 단어 시작
- `\>` : 단어 끝

### 예제

1. 문자열 치환

```bash
echo "hello world" | sed 's/world/bash/'
# hello bash
```

1. 특정 줄 삭제

```bash
sed '2d' file.txt      # 2번째 줄 삭제
sed '1,3d' file.txt    # 1~3번째 줄 삭제
```

1. 특정 줄 출력

```bash
sed -n '5p' file.txt   # 5번째 줄 출력
```

1. 원본 파일 수정

```bash
sed -i 's/foo/bar/g' file.txt
```

1. 주석 제거

```bash
sed '/^#/d' file.txt
```

### 캡처 그룹과 역참조 (자리 바꾸기)

```bash
echo "1234 5678" | sed -E 's/^([0-9]+) ([0-9]+)/\2 \1/'
# 5678 1234

echo "1111 2222 3333 4444" | sed -E 's/^([0-9]+) ([0-9]+) ([0-9]+) ([0-9]+)/\4 \3 \2 \1/'
# 4444 3333 2222 1111
```

### 공백 처리와 `[[:space:]]`

- `' '` (스페이스 한 칸) → 정확히 한 칸만 매칭
- `[[:space:]]` → 스페이스, 탭 등 모든 공백 문자
- `[[:space:]]+` → 하나 이상의 공백을 허용 → 온라인 채점 환경에서 안전

### 고정 자릿수 vs 가변 자릿수

- `[0-9]{4}` → 정확히 4자리 숫자
- `[0-9]+` → 1자리 이상 숫자 (자릿수 가변)

예:

```bash
sed -E 's/^([0-9]{4})[[:space:]]+([0-9]{4})[[:space:]]+([0-9]{4})[[:space:]]+([0-9]{4})$/\4 \3 \2 \1/'
```

→ 4자리씩 4필드를 역순으로 재배치

------

# 📌 요약 포인트

1. 변수 참조는 `$` 필수
2. 조건문은 `[ ]` 안에, 띄어쓰기 필수
3. 정수는 -eq/-gt, 문자열은 =/!=
4. if 끝은 `fi`, for 끝은 `done`
5. 산술은 `$(( ))` 안에서만 가능
6. cut은 -c(문자 단위), -f(필드 단위), -d(구분자) 조합
7. head/tail은 -n(줄), -c(글자) 구분
8. tr은 문자 단위 변환/삭제/압축 전용
9. sort는 `-n`, `-r`, `-k`, `-t` 조합이 핵심
10. uniq는 연속 중복만 제거, 전체 중복 제거는 `sort`와 함께
11. paste는 행 단위 병합, `-s`와 `-d` 조합 중요
12. awk는 패턴+액션, `$0`, `$1`, `NR`, `NF` 핵심
13. grep은 패턴 검색, `-i`, `-v`, `-w` 조합 핵심
14. `sed -E` → 확장 정규식 사용 (괄호/+,| 등 편리)
15. `g` = 한 줄 전체 치환, `I` = 대소문자 무시
16. `\<` `\>` = 단어 경계 지정
17. `[[:space:]]+` = 안전한 공백 매칭
18. `( )` 그룹과 `\1` `\2` 등 역참조로 자리 바꾸기 가능